## Quick Start

将所有文件放入至工程根目录

* 如果有同名文件夹，则将文件夹的文件放入到里面去。
* 如果有同名文件则覆盖

## 文件改造
### package.json

1. 添加运行命令
```
"scripts": {
		...
    "lint": "cross-env eslint -f json -o lint.json \"src/**/*.@(js|vue)\" --fix && stylelint src/**/*.{vue,less} --fix",
    "sonar:scan": "node sonar-scanner.js",
    "postinstall": "node ./scripts/postinstall.js"
},
```

2. 添加工程依赖
> sonarqube-scanner 必须为指定2.8.0版本

```
"devDependencies": {
		...
    "@commitlint/cli": "^11.0.0",
    "@commitlint/config-conventional": "^11.0.0",
    "cross-env": "^7.0.3",
    "husky": "^5.0.9",
    "lint-staged": "^10.5.4",
    "sonarqube-scanner": "2.8.0",
    "stylelint": "^13.11.0",
    "stylelint-config-standard": "^20.0.0",
    "pretty-quick": "^3.1.0"
		...
  }
```

## 配置改造
Ci过程中会传入《研发效能系统》生成的`PUBLIC_PATH`，这个会注入到环境变量里。需要在`webpack`配置`publicPath`,
设置为通过环境变量`PUBLIC_PATH`传入

```
// webpack.config.js
module.exports = {
  output: {
    publicPath: process.env.PUBLIC_PATH || '/'
  }
}

```

### vue应用
本套ci文件是基于vue来做的，可以查阅`vue.config.js`配置

### react应用

* 基于`create-react-app`创建的应用，安装覆盖工具`craco`，新建`craco.config.js`文件, 需包含下列内容
  ```
  module.exports = {
    ...
    configure: {
      output: {
        publicPath: process.env.PUBLIC_PATH || '/'
      }
    },
    ...
  }
  ```
* 其他脚手架生成的前端应用，自行查找设置publicPath的方式

