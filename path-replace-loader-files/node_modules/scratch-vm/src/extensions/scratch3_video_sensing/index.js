const Runtime = require('../../engine/runtime');

const ArgumentType = require('../../extension-support/argument-type');
const BlockType = require('../../extension-support/block-type');
const Clone = require('../../util/clone');
const Cast = require('../../util/cast');
const formatMessage = require('format-message');
const Video = require('../../io/video');

const VideoMotion = require('./library');

/**
 * Icon svg to be displayed in the blocks category menu, encoded as a data URI.
 * @type {string}
 */
// eslint-disable-next-line max-len
const menuIconURI = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAgAElEQVR4Xu18B3gd1dXtOmdmblG3ZSNXwI1AHAIEDIRmJBn/CSUGAqaDwbaEQ0no3RFJfkJJMAQHW9eU5EFCaAmE5ibJQAoQCAkdO3QXybJs1VumnPO+fc7M3JEsF4rgfS+eLzfyZe60NWvW2XvtfYZhxzKgCLAB3fuOnWMHwANMgh0A7wB4gBEY4N3vYPB/M8B1T6wdAm7tKsBGghtlnpBJDg4JLyeFbBeeu5Yx9uEN03ZaDzA5wFh9pt3/v8NgKVnd0617OcycarviUFfIfR0hh7kemCckPB8+KaUamRkDTMZgcCYtJjcYDP+0TPYXk/Ol1ivlL9fVMfGZEPmCN/rKAa57fP14xzDPzrjeKVkXY3KehCMBIRkIUwVn37OUAAGtFvorpeK1AYmEASRMtiZu4CELuOeG44e98QVj9ql295UBXPd024FpIa/K2DiqxxGGIxmEApODcaY/PrjqJImyClD6n/o/BbL6CP0RQkAKAS4FTEgUWEwUWKwxzvHzG48f1vipkPmCfvylA3zt0vUTHMe8uSvnTUs7krnEPcbBDQ7GGOIWU38dQX8jwBL2GteQuZq8BDIUsAHIwpMQngfpEdACBYZEccJYnrTYJTdMq3jtC8Juu3bzpQFc1yRNJ912ZVdOXtPlyIQDDnBDA8sZOGcwDI4zvhFTEvHg246Sh4C4va6mlzpoidBMJmmhvwLCExCugEdAux4MCBRbzCmJs9s94c6dN310ZrsQ+pw/+lIAvnZJ85hcznygPScOyAoO6QMbj3F8rdzEuMEG3moT+LBT4sixJlwBLPvI275L8yVDs1iDLSKSoUB2PfWRnocEExiUNN5IGjj5phOGv7l9B/nsvxpwgOc+017dmXMf7MjJcof01TCQiHHsM9zCNytMxAw9mP19rVAgB5QNT6yfAS56ufnBTsuH+u7rMgGtPi6x2YNLQDsuDOlhUJx1F8fZjFtOGPHoZ4dv21sOKMDXPLXpjM6cd1eHI2OSm2Amx7hyE5N3idEAhIwr8VabxLubJNJufhwLTrtfefADh/DSArnwB77wT6/BjzTZZ7KjQYbnosSCVxbHZb88adS8bUPV+xdyVtMocHkxmHiG1U9ZtqXttwqwrG06HVIeCybmsvopb32ak7j26bbZm7JyQZcDQxoGDNPAQTvHsPcwU8W0/1ov8PoGP771z6JfQKNnuIVUIojYohGGjjL8QZA0mZisQBbwHA+u7UC6LoosKcsT7NpfnjTqhk9zfbK2MQUpZgNIw3P3Ynd/5z/9bb9FgGVt416Q4iUAMYDfy1JV52zvCVzzVOsp7Tl2X6cDA4YBbho4fNcYJu5koj0nsfwjgXY7z9hewOqYLDzU1vGNhhUa0DCU87+EIFNkEYJMLNYgC8dFsSXk4CT70a0njf7V9l6jrG04G1Leo3/PlrJU9f9sN8ASdRy1h/0VUhyogiPGjmP1VY9vz8GveWbjIZ1Zd3mHzeLSMGFYBsaXW5g61kJbVuLpDwRsP8cKgY2AukXt7SW8+S95UufBVtj2ipcDJktIT8Lz5cK1XdBHOg5KY/DKCvjxt04f+eftuU4JyVDT2ADISv/3x7HUlMf6btsvg2VN01mA9xv9Y/4oS1WdsD0HvXpx6/BMFv9sy2KY8MElaRhezDFpuInn1gj0RLXWB3ZroIas3MIJBNtG42P6aV82R5lM0YYCWbHYhZNzAM9BeRwdRXG+/60nj1q5PdcrZzdOBJOvAtIC+DtYyfZkKyrd6LabASxnNCUQE+8CcmeApQGxB0sd8fE2Dyglu/yJtiWtGXGEw4i5ptJdbjAV61J0QIzty9r+wPUDAQWSH3mFf4Pz4P6+aH+cdh/JSXz69g9yJISL6jGBbHgOdioyXnG6R307Vcucvtcsa5aVwvMMdvd3NgbrZE3jQkDUaqXgZ7H6qv+zdYBrms4DvPn+Bj9n9VVXhzub9ewYGE6yvwHvmqc2ntuadhf0eBxGzFLSQImDTiI0Av2CG7nFAaCeADwPcP2P49HmEjHKTRhA623J1L9NI/+h+6jupbrYIJ32ZVndNYqVid160JMuMZlY7MGxHbhZG0nuoaLY+vG8k0f+pJcqnb1kNGLWvwFYgDggwEDOenoUeHwVIBMAfxOp577JUBcaTb0YLA9vMrGbXAmIMQDrgBEbwxYcukk9cjUN48DY65AyBsEPYXdVvhCcwNWPt1T0CP7OxhzKYPZmL6W9ylcIjhSVhcBe8JkqBEARFD2xTErsPhjYoxwYUwqUFwAxQ2urK4G0I7G2C3hvE/D2RmBNN4NlMcQswPJvhBo+ArmIpNW94mRXqPhYSUWWBj0bgxMsO7SA7Xnj9NFhZCBnNuwPQ77oE+9uVl81K8LiekDUaEXl32ELq5YE63oDXNt4PKTwA29+M0tVXRHupLbhNkj5Q/Vd4gi2aMryYN1VT264s7lbzLGZAdNnr5IGrv2FkL1bAJcY6bpA1gFiTKJ6Z+DQ0UBxnMMyGAySAbpRGl/1IQa6QoLct4wjsKZL4tmPgX9v4ArouAWYSpn6Bzk0iEiL6eOz2M7aMIWLYUX8j/NP3/n74fXTVdQ0/AuQ3wRYDyBGstQRHQqO2YsngpnkcdARH2Op6uP6B7imYQkgpwLMBcS4QHvliQ8lMah8NSAHA2wlUs/vETwG1/65eUyHY7yzyUaMWRbMmA7LyFvoJQ1bAJdkwHaATE7i0FHAtAkMpQmOOAFL+wi0tpdnqfw0pcsEtC0kso5El+3ho3aBx1dxrMtwJOOAZRCp8iDrdDpvEinPgiILlwY7D07OhpuzMSgGMbTQnHTLySP/mWdqw/mAvEOzGLNY/ZS7IwR8FlIeBjAb4CNZqnKD/pm/yHMbRkLiQ0hpgrEnWX31MZEdnwjIh/R3fjlLVd0SrLvyiQ13tPR459vMjLCXK4B7s1czMDgiSSKBm7UByjzO3hPYp4IjYWnWamD9baJiGPm3ihx8sFwpkXMlum2BtrSHpR9IvNBsoCDOYJlSaXNA/7wDp00ibQoRiwlkF8RiQ9gYUWQ+dMcZO58U4nDm8nIk2RpIGQdjy1h99dRw3aymmeDeXT5GtSxVleoNcO3yH0LiNv0DNp2lqh/OA7z8EQDfB2MuHG8Xds/UtbSu7ulVJZtyZZ9syMoSzV4TBiUWvjxEpSGEiukQisDN2YAhJS7cFxg3yEDCYjD9G/NpcnjtQWhW2p5Ed87DhrSHv3wisOxjEwUJhpgp1U1T9yTKYnLglPsm4TouXAI4Z8PL2ShPwCktMsbMmz56TYRsTwPyuwBs2EYF+01lu9rnzMWDYVjrABkD2DMsVX1kb4BrGhp10Mx6kHEr2H3/06M21GHbekAWg7HnWX31YcHBrn6y7Zz13e7daWjtNa28PGyJvQQEaS4NZK4jcfF+wG7lBhIm1xHANli7BTJr4EgyIOG4Ep05D609HlZ8LPDcagsFSakGSTXYhil0PgEJvAqKKOysAzubQxwuRhYbV992+i4/jwA8B5B3ah7y77P6qj9G1uUxtPkQ9pvKrLqn8pzHi2EWtQIyDrAnWKr6e3nqN1SBywaf+r3k4dLHWpe1pMUUYVqwiL0EsG+c944c8vJAkYLtAt0ZYMZEiYNGGyi0tN5uDVzpuPDauiBtB7y4ALysUEtQnyUA2XYl2rMemrscPPouw/tdJpJxqQc+33VTyQilzwS471MQiykmJpmA46CiiP27/qxd9w7xmLl4PAxrJSiTY/wOVl91YbiutvEqSKE9DcYms/rq5zTAtSuOgHSX+isuZPXVWshVeNb4E0Bcp05LevuwRVP/Rf/9imUbSzOdzvoNORbjMQuWZYJT7EuRgxJQny3qn/p7IA3pHPCNQQKz9zbCSKE/cOmisyteQ2bJK3Df+liHGaSZRMFBRYgd8DUUHX8wYuNG9IJZx9MSaYf02MVH7S7ued2ENBkSpk5M+pUJV8uEo0I2W30GJ6QcGsuN+8WZu3+QB7JhNaQcCeBllpoyKQ9+48EwxF/0d3YVS1Xf6APcOBdSXK9R4PuwRZUKRA3wcrLipgCsHZvahrCHpysn/NonW7/X3O093iNJHmKwItHDluSB2EvSkMtJzD0IGF1KusvDECyKkvP+OnTe+DDwcSsMiq3pxhkG4lefCNmTRc8tj8J1XdiOg8RRkzDo/GngFJv5C7HSFQKdWYF1XQ7+tlqgYbWF4oROTEIWq8xOS0U0fVYykckhyVyMKIvNvu3U0f4ApjD5E4BjwVgGG9vK2MPTaaiGrHm5AOjY5OvwwyxVPV0DXNPwJ0Aeq+O70kEstZ9KE7Wh0dQCiKFgrJHVV1cHF3DF4603Nfd4lztcRw9qgDN13LsZwH3Yu/9OAqdNNFQ4ZqpYuRcBkXtlFTqv/x0swRA/cHfEvncA5DurIR57CdbCORTTIfuDhQpgx3GQy+WA8cNQcWsteGFSE8MfzNKuwIYeF590OLj3dQsuZ0iQc6DOKQ+uquepcE0nHTbJRCan0udhxeZvF5y1y4yQdLOXXw+Gueo2CfF1dtcRb+cJ2fAWIPcAY2+x+uqJAcCkKRMA9k+Wqt43/PGMp4Yhllir9AbsNpaqvihYd8mfWpY1pzGFMjczTgOcqaKHAGBGYZF6UnQWR48tsbcrDVx1gMBu5SYKLL+CHMHX+Wg92i9cgBgMFJx/NKwj9lY6KRe/Cnn/s0BRgi4Kojur01zXVQBns1mwvcZg2C9rwEgD/EHP8QQ2ZT2s6XSw/AOJVzdYKEzolFrX8rRcBB/yJ8jGtCmayNiQTg4Vhez1ReeM/WYexGdPBZzf6YPwaWxRVejAydqGP0JKSjTS2FRdwmTNyxbQ3gUgDsYfYPVVp4Y7mrn0YBhcawoz5rD6yoXBuh8+un71+owcqfQ3zN40G8MBLqK/FDnQuFHMJa7+NjC4wERcDYh5dIlRGy9cCP5+C4pqvgtr2gGQ7zUD9UvB1mwMzYywXK8eaw+2bSuA0+k0Si8+HqXHHhyymBKRrpyHdV0u3t3g4P534ihJ6gREPaP9AawGOgI4p5KOoUlkdhk/pqSukhIwytyWHARm/FXjYp7H6g/XUYVWg3mA/JFit82HM136EJ/4DtRNbNGUK/OPQtPJYN4D+js/mqWqnqJ/1T2xtmBD1uhoy8EkY4cYrMydwNQJvIcIwBT39mSB/YcKnPINjkEJAyYBHGFv9sV30DX3fhSMG4mC+bXAuk3A3D+A5Xo5gOEWKkkQQskEAZzJZGAXx7HzI3PBSGhVkCCRtgVaemiws3HfGxY8gxIabSDlAdal/yBttonFGRtuNofBCWBIsdj51lPGf6JAPGf5WFjsPd+u+ylLTZmbB7jxMkDcrOVD7sXkzGX7wOD/VAAz40esvvL28Me1DRdAyl/56de+LFWt0sZrHl27y0bP+HCTDZhxGuDyEYTuHQl6GnQEQXpIAFNo9v3xAlW7GighgIPI3z/gpp/9Hvj7ShSeVonYqZMhf/U02EurIreg9z8DJgcyQQD39PSgYt65KNh/d80oKZF1JdYTwJtslUa35EwkqU7D+gKs+ym0u0YZXU6BXGoJVBRi0rwzx72s9qmTig2+dM5nqeoLQszOXTEbwlVZHKQ4nMma5eTI664Xw5rBFkz+beRuXAeIn6jn2DPHsrsmq1Dlusea92zJ4rVOl2v9jZkqySDt6yUR6hHSHCWXrDMNzNnLwz7DLBWeUewboSNaTv45EmkXyX3Gw5q6D3B3IxhtuJWFAFTRhG0rBhPAhadXYUjt0T7AQJYGurSLj9ttLH2fYVWXhYI4YPQC2O+rIIAd8iTyABcZHoaV8Km3nzFWFTe1NzOYZJWcjntYqmpmiNmcZ0+F5+uzEEcxWbPsKIA9qQGOT2cLDs2nyLXLb4DEVQqkHB/OflPZrBj8+Nr9WtP8Hx0egxWPbQ6wsij9Q/oAU3LR0QNcNsnD18o3B1jkHLQc/WMUJpOIx+OwLEubRdtYdHildTgA2Dp8Twz/iR701eAaAuyg6SOJNzbFUEgA874aTD60rtdFAS40VEb3vXlnjn1CA/xmDIObe5Rvw43fsoWV+Qij9tmTIJ0/qIMz9j0maxuOgZR6FOT8BLawKuwTkLOW3QzOLlMSodPn9YrBf1q7b3OWv9zp5gHOZ3E63c0nGpqlIcD7edhtiImSOGl2nsEik0MzAVxQ0Avg/rK1KOb9Mdg6dCJG3KBJRQAHDCaJeO5j4PWNMT+S6B2mUTysmlQcT4VplGiQTBRyj8pex9x+1jhFRHni35IYlNYMZsbdrL4y7w1vxuBZS48E52rwAjNOZvWVD4Z0r1n+vwCuVnR03JGByXPdIx9NbHHib3Q4DGYiiCLIQSOZ6B9getKJwT/Y21MNJwSwSWGdfzAaYNYd82MkYSCRSCgGk3G0NYD702CKJJLTDkTFZdoEo0GO/OJWNcgRg4F3O3wGK4nIgxw0qSjznTQ4owEuNj2MLLKqbj1r1yYF8NY0eE7TLHjeIv/glUzObDgMhnxWM9iayRZO9kvRlEL7ubV6zL3dWP1UNeLUPd46ojnjrtlkMxj+IKeMHr9E1J/JTmWf7jRwwgQPh442qH0JVp8wreX8X4OvWodkMolYLAbTJOfUT1z6kYr+oggCuPzqU1B2zLfVFtRb3OMItHQ5CuAlH3CszZAGa49YVzd0LEwAq0RDSYSOIpxsDqUxSQze+9YzxlLJaPujCNfZm8kZy/ZEjL+mcx/jUpaq/GXI4NqmcyG9Bfo7P5ClqlTJpO6hN2OtclDnhiyL8xBgkiPtA2t56K3DFAf3ZIADK1xM283AkAJT2ZNUqQiWjgdXIJ1arBgcsDioikSZvLU4OOs6GPvU/8IcVOxHL9pZW9vp4OMOG4+tiiErqX3LN+EjqbIq6SuAaYDThg/V6cqTkBUFctgvzhyvJFLObjgITG47DoYzgslZj1eAF68DBBVm5rFU1cUhwLNXHAfmajuujzV3wYPr/rM+I8cx8iHiFEX4qXIQSfTRYfIhMjYw1BKo2VuioshEcVxXPgKIRVcGa076GWKOVAAHLA5LT4Gc+N2UfTM5GuQKvjsJw+eeEcoDuWptGRerOzSDH16ZRKHvD+dtyyCC0O1VyuzxU2XPtlFRyNt3WXtfeV2dLmbKqM5uMZNjaazkpUye+JCBQeXtgCwCY39i9dXH5zW44VsAXtExMr+E1VfdGqz70cPNj7X0eNOUVakiCd0epcCgwT9gMaFHqbJgyHlAOiNx0b4udi2zfJnozeLOP/8d7b94JAQ40OJoRBFIQ9SLoETDTVoY8+B1MMtLFHuVPFCS0e0oL+LVZomX1idQlNC2ZS95CCobAcBZB7lMDnBskocX7po9XmuOch+XXw+5BS+ituFNSPl1MP4Wq68KvIjlVLDbE2Bvs1T118MdzWgqQ8xrU8U8xhex+ipdOQVw2aPN167rcn9qcwI4MHvIcA8Mnz6DHZhONrLAIcNdTB3LsVOhicIYh+H7FVoSJTbc/BDST74YRhOqSsJJfnjY1U7spQwuMHtcJjHy9vNRuN9uYZcllZDIEyYfgj6L37fQ5ZlKHpTZE3gQgR9MEuHblSQPpMEmlY5KrfkLzxmbTyYCc4zxDDZuiLhpTxQASarCU1Uj4qbVNt4PKU5TBbuMOzioZqgLrmn8EBC7gLGXWH31AQHAV/1x3eSWHrGiy+ParkyQRFDJiLRXs7jXYKdGdKb8CC4E5uztYmRJTKXMcVM3YEcjirb6J9F5fyMstU/qschHFJQeB/JAAMvSAoy8cRYK9pkQgkvs7coJlcERuP/ZSOUjYq/2IVSa7NuUqnE7aKcKBjjlB+dQaHgYWZaYfvuZu0TyA98PluwVtqh6v7ykRrQZxlUsVen7weeuuAjC1Y+/wGHsrinP5x+HxkchxfEAy2JT22D28HTVGX7B06viXkdRS2tGlHKlw7pkFHTz5Dt58jGxSpldpjyJAyocTBlDLNZpsy509i5yZl57HwR09pVV+RYAn+Wqcz1uoXTaQRgy60gYpYURcKFCMyp+rut2VFVj8Qcx9AgaWKVqAwjndvhmT9CoHVqVWarL5TC0gDvFBc7wX5+1Bz3JFKJFKhrsDlZfHaloNF0B6d3oDwCV7K4jVvh2ZeMBgNCNJIxdx+qrf5bX4aZLAO8X0Y2CdRc9vO6BdV3eyZ6RlwnTb5fSfkQ+otC9TbrUbtvEZInTdncwoVxHFEXUA6HK9JtPG3DWtSH9ykrYn7RC5hzw0kIkJoxCwb4TwKk2H/i/lNVRCd+V2JTx0NLtornbwWstDP/a4Gvvltgb9qpR9KBrcsxzMKLUbFw0c1zog8uahnxNjpvHs4WHk/nua3NDA6Ss0lblRipOZHyAybLsXA+IMoD/haWqDs0DvPhbgBUMdL1aqa54pPmYlh73z90kE0qHg8Kn1svA9AmA1jdQt0VlbIYkPJyyh4sRJSYGJw0UxQzESC62o2Qfnp+PLpWRXE+DS7pLicX6bhcftkusWJ1AIg7EqFwUddCi7A1MHooecrpcRPIwvNSaNX/G2Hz/Q01D/1XlOU8OgpcgK4FspMUsVUWV50hfRE3Do4AkKXCRcUcGabGsq+NYeyjZmSMA9hZLVU8MLo4mtrSuW/PB+jRGwYoOdnrWkI6Jg6a/vFSocg6BnGMoj3k4doKrwjZKPopinOa5+eX7fD2vb3kz2hPhSQnHoxqcBpekgcydNZ0CTZ8kYJi600dl5lGTnf6tYl8dnml5oOzNhqDwrMjoMCx39D0zd6e0GHJrfRG9+oWNc1mqsr43wKqb3btPc52fxxZV5U3k2Q0LwOS5qqNOyL3ZXVPCqVCXPNJ8ZXOn/fOs1JUN0mLSYSofqYGrH5B1tAA4FBvngDJT4KixVME1UJY0UBzjSJq6AUW3P2lWR1mrTB51ozRrqcDZkfWUNFAF4+MO4K9r4xpcM1/B0A2A2uQJ+iHU/I1gcPPZG4OLUWXWvDvPGZfPC3o1RhqzWH1lpLOnsYnsSRUoONYodu9hrb0BPu3pEhTGqTxUCPAXWarqwPCCZjdOBhMrfPBvZYuqLgnWXfHQe6UdTvz91rQcTM0nMQI42oDil5ECJusCc77KTCBTAwoXEpNH2Rg3CMqnICYnLa4iDPKNA9kggMhfCFhL4FKs22VrgClyeKPVwNubYoq1JAtBeahvP4SaHONFmv/8cj01AA4t5NmyYky44/QJq30VyvemMd4N6Y0Ke9NmLdsDnNGMUqogPM7qpxwb4NPryZM1DfcB8nTNVDaJ3VX1it55HUfNoVS3GwewNiC9M0sdkw52csnDay5v7nRvyhCLVQnJ9EH2JxiGBnx+AAt0OWxEoea/HDCqyMWkChdDC5mq2RHANBMpaADUrQxaEqiLh2SBIgZi8MedDK+1xpD2dCqs+tJ8WYj2o+kCp+7myRvsOjWm3rQE8yj2vXXBzHEhkWTt0mpIrhseJb+bLYp0V9Y2LYD0ztXr2JFsUfUz/QM8M1LXZ/x3rL7q9Pxg13g5IG7yv5/LUlOUxtAy494PEgUx67X1PWICTRtQUqGqzLoQGjSj9M3uAjYHjXxBIyAlCBUJD2NKPYwuESj09ZMijABgmktH8rAxC3zSaeCjTlMBG7ckLGKtkn9/WkHfTh41X8MvD/nSoFLjnK0ih4oio6Usbu5+29ljVFuUwm1241VgqqlEQGCfQCblOUtHwDL/AymSlKgh9fw3ttgfrHfU8CKY3B9gDjz+dXZ3peqRlXOeHwTP/ki3UPFbWH3V5XlVBC59cM2UtrS3pN1m3KA+tT5xMSUfeSPIrzYHIqWeIxZ2tFOUQe4bfQjEJE2FtQTiBk0XoX4Hsqc5um0GR3IFqGXo9Ndvps/X2/zGtXxSEbBXTyFw6GNT1OCAfAdyziqKrVPvOGecX4v0AaYBroD/FML4F0tN1iUhXeS8k9BRXzg7my2s9qde6PWb9R7J2sZpkMKfzMF/z1JVp4U7m7XiUBjeZHRlfs1+f7RqzI4uFz3wyR3N3d75WWHAUM0oup1KDXgRK1NP9PbLScFk+uBMVBLgg62mxupeNvobzIFTIbXqGdYpr6q1Bm2ufpQQSEJ0OpfqalfSEEQNfrqdc1T1OM48DC+xHqqfPT7sqOx7jdHv8gfP7gHX/beeo8FWYiWfuO05Gnr2zIuApJYgAfCDAptyawcLpKIwZj7f0uXt53HSYd1SpaodKqrIRxbR2Fg7ln4Y1+e2B5NZtjgZxp8kHpTg+5tdpPrPgrkZkR406n+g0hAx2JAuMXfVToPYpJumj1ON1VsFl064tnEZpNBJSB+3Mdh2MwYr2quoQTbpqil/BSvZgX3vzJYOfvEDa0Z3294LG9JihFBdP/qTD938qkeY6eUbAwOcA7C3eIH5KUUhqwN2B3Fubyty8zlyDrWqKoAdcOFgaKHZPrjIOui2M3cNu3S2CvDshuPApN9ZyZezVNUR/f2+X4AVyLWNv4cUp2htMU5nCyt1J8t2LBc/8OE+nVnWuDErygTNOFJVZ4qPeehVaEMokoSox94/nchZ9ZtgqBPMn4ien+z/p7B7Pfoeid5TaXWDn6MA5sLD4CTPDCpkR84/e4IORbdjyUspo+Lnt9iiKf1O/doywNQ2FU++CmAIJJ/KUoeretT2Lhf/YfWBnRn3mY0ZWeYxQ03r0qa8Lxcq0wtAzr8bIs/iLT1kUWTzoIZdOuEcZX82kQrF8jPuVZO1moDogEtXg1vAj5t/zoRw4sr2XqOqbAi+PggEPhWDFUnID2a8mN07WXW0fNrlst+t3rvd8Z5qS3sjXOjm7BBkAlj5vDrby6fVgRZvzmZ1/Oh8ZQLTd9fyGVrw9hMdioXzk11Xd7DbrpqPYUoPQ4qMjYOS5nG3zxj73Ke9tu39/RYZvL072NbvSJOzrvfohm5nUsbTLajBJEWaR6c9i8hrZKLdmeHAFz1NneYqrANpCF7IEX2NgZ+lad9Yz7AngCqxQWAAAAT5SURBVGmWfZxLlBeZ75QUGMfefsbYd7d1DZ9n/YADTCdH3jHbGLulPS3O68gJLpg/1YA8i15M9icuRm3OqDb7HkY4k7OXM+Yzl8Iwlanpl3DkPy649FAS57KswLi/jLnn3eybOJ8HwG1t+6UAHJzEpQ+trurscRa2Z8SEDE0UI20mgP1aXjRWjjpxm4Xr4URvH9RAd8MMzVNNfGTiEMBMeEiYkjo6PymMmxfOP3vMZpO2twXUZ13/pQIcsBltiQvTOffKjqw3mAqhQr1pypeKQDIC472fvojNpCHyPohAd+n1MVQTShgSJUmjqyhuzGOZ7C13njex+7OC9Vm2+9IBDk7ygvtXlUDG5mRy4gfdtrdzhmYdETN196AfwgUTY4J0L6q9geWoX4IUfAhUk9G700BvmmpJxnh9gePe8cvar6mJgV/28pUBHFxoXV2T2Tlh/NSenHtm2nGnOy61A0sFNhVJVYrsmzz5KCIwcah5hNJlqUClaVrJGO+OW2xJgckfEJ3iyTsunJD7skGNHu8rBzg4mZ0uf+EHBpO/Li+wUJ4wUWLRFAMqIZHDw8mPYOELkJSvQsosIKRA1vXQY7vo6LbR3uW88M6tyw5GZMb7fz3AJRf9bXCBxd8Fl0MUGB69akBA5jxw8OtPO2TcfOGly+CyJL1MwPbs3Jvrcjut78k1CQ5TOUe0jSMgbBrcMOO9Xx0S9jn/1wNccfnf72BMnh/OlnEJLPIr8VFLwtwD8w7q9yVyu899aT7j8jxKVFQZiGJfW0DaWLupU+6+4Z5DVC3tq1y+cokYdsVLE6X0XmWcuJlnIhXshMdPal14iD8JfXOYRtX9bXCxtELmK5BtT7PYYze/d9vB4esYviqQv3KAKy7/+1LGcIQ/MxD0XkVir3Tkc+sXTj68T3K8GU57zH15Drh3p2IxxcOuhLA9SFvmPM/b8/1fTd7yJI8vAfWvFOCKS1+Yxrh8jF5jodlLj7cgLfWkwKTWhZPJbNr6cqI0dp/4j1cYk3uRG0d1NtJiYrJ02JOrbj84fC3DtnY1EOu/OoAveDpekRz0BmMYr9jrayi980u6WLR+4WFho+G2Lnz3un8cziAbKXxWLCaQSSZyQgoHR703/5CwCLmtfX3R6wcc4MPv/SAxNLbT2dxke5iqZ1Qvnd3pMe1dnUeHaXDwRiQhMWTo4AcKkolPlRi0bmg7VUivPJAaSTOqhaCJfB8MqSjXk3yoUErz6nISbg5vd65Zf++KujHZLxrU6P4GFmAp2Qm/Ty+xLHmEGfMtyf4KgQN5hf6+g04gMoII4GzaQzaD5YvPK6FX6GzhpY2f/8QGFOBjUh2TEoXGS/EkgxXLV5U//2l/tj2oh8QVsG2JbI+HdLeHTMbb/9lLh/zjs+1x21sNLMD17VPNOF8ST3JYEQZv+7QG5heqp4LeEU8Apz1kughg+Z3nryz/1NWM7T3DAQW4en5necKSH1gWig2a8BJpst7eE/wif6f70eilGxK5jEfvrejuyVm7vnR1ier9HYhlQAGmE66+veM7BpMLGJe7BO+9H4gL2eY+A39IvbeSXobNPpIen7Pi8tLF29z2c/xgwAHW5ybZ4XWthU6y3zcEf47T/2ybWhkpV9QN7RnIwS04sy8J4M8GxP8PW+0AeIDv4g6AdwA8wAgM8O53MHgHwAOMwADvfgeDdwA8wAgM8O7/L7Hfo+bbwQ0KAAAAAElFTkSuQmCC';

/**
 * Icon svg to be displayed at the left edge of each extension block, encoded as a data URI.
 * @type {string}
 */
// eslint-disable-next-line max-len
const blockIconURI = 'data:image/png;base64,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';

/**
 * Sensor attribute video sensor block should report.
 * @readonly
 * @enum {string}
 */
const SensingAttribute = {
    /** The amount of motion. */
    MOTION: 'motion',

    /** The direction of the motion. */
    DIRECTION: 'direction'
};

/**
 * Subject video sensor block should report for.
 * @readonly
 * @enum {string}
 */
const SensingSubject = {
    /** The sensor traits of the whole stage. */
    STAGE: 'Stage',

    /** The senosr traits of the area overlapped by this sprite. */
    SPRITE: 'this sprite'
};

/**
 * States the video sensing activity can be set to.
 * @readonly
 * @enum {string}
 */
const VideoState = {
    /** Video turned off. */
    OFF: 'off',

    /** Video turned on with default y axis mirroring. */
    ON: 'on',

    /** Video turned on without default y axis mirroring. */
    ON_FLIPPED: 'on-flipped'
};

/**
 * Class for the motion-related blocks in Scratch 3.0
 * @param {Runtime} runtime - the runtime instantiating this block package.
 * @constructor
 */
class Scratch3VideoSensingBlocks {
    constructor (runtime) {
        /**
         * The runtime instantiating this block package.
         * @type {Runtime}
         */
        this.runtime = runtime;

        /**
         * The motion detection algoritm used to power the motion amount and
         * direction values.
         * @type {VideoMotion}
         */
        this.detect = new VideoMotion();

        /**
         * The last millisecond epoch timestamp that the video stream was
         * analyzed.
         * @type {number}
         */
        this._lastUpdate = null;

        /**
         * A flag to determine if this extension has been installed in a project.
         * It is set to false the first time getInfo is run.
         * @type {boolean}
         */
        this.firstInstall = true;

        if (this.runtime.ioDevices) {
            // Configure the video device with values from globally stored locations.
            this.runtime.on(Runtime.PROJECT_LOADED, this.updateVideoDisplay.bind(this));

            // Clear target motion state values when the project starts.
            this.runtime.on(Runtime.PROJECT_RUN_START, this.reset.bind(this));

            // Kick off looping the analysis logic.
            this._loop();
        }
    }

    /**
     * After analyzing a frame the amount of milliseconds until another frame
     * is analyzed.
     * @type {number}
     */
    static get INTERVAL () {
        return 33;
    }

    /**
     * Dimensions the video stream is analyzed at after its rendered to the
     * sample canvas.
     * @type {Array.<number>}
     */
    static get DIMENSIONS () {
        return [480, 360];
    }

    /**
     * The key to load & store a target's motion-related state.
     * @type {string}
     */
    static get STATE_KEY () {
        return 'Scratch.videoSensing';
    }

    /**
     * The default motion-related state, to be used when a target has no existing motion state.
     * @type {MotionState}
     */
    static get DEFAULT_MOTION_STATE () {
        return {
            motionFrameNumber: 0,
            motionAmount: 0,
            motionDirection: 0
        };
    }

    /**
     * The transparency setting of the video preview stored in a value
     * accessible by any object connected to the virtual machine.
     * @type {number}
     */
    get globalVideoTransparency () {
        const stage = this.runtime.getTargetForStage();
        if (stage) {
            return stage.videoTransparency;
        }
        return 50;
    }

    set globalVideoTransparency (transparency) {
        const stage = this.runtime.getTargetForStage();
        if (stage) {
            stage.videoTransparency = transparency;
        }
        return transparency;
    }

    /**
     * The video state of the video preview stored in a value accessible by any
     * object connected to the virtual machine.
     * @type {number}
     */
    get globalVideoState () {
        const stage = this.runtime.getTargetForStage();
        if (stage) {
            return stage.videoState;
        }
        // Though the default value for the stage is normally 'on', we need to default
        // to 'off' here to prevent the video device from briefly activating
        // while waiting for stage targets to be installed that say it should be off
        return VideoState.OFF;
    }

    set globalVideoState (state) {
        const stage = this.runtime.getTargetForStage();
        if (stage) {
            stage.videoState = state;
        }
        return state;
    }

    /**
     * Get the latest values for video transparency and state,
     * and set the video device to use them.
     */
    updateVideoDisplay () {
        this.setVideoTransparency({
            TRANSPARENCY: this.globalVideoTransparency
        });
        this.videoToggle({
            VIDEO_STATE: this.globalVideoState
        });
    }

    /**
     * Reset the extension's data motion detection data. This will clear out
     * for example old frames, so the first analyzed frame will not be compared
     * against a frame from before reset was called.
     */
    reset () {
        this.detect.reset();

        const targets = this.runtime.targets;
        for (let i = 0; i < targets.length; i++) {
            const state = targets[i].getCustomState(Scratch3VideoSensingBlocks.STATE_KEY);
            if (state) {
                state.motionAmount = 0;
                state.motionDirection = 0;
            }
        }
    }

    /**
     * Occasionally step a loop to sample the video, stamp it to the preview
     * skin, and add a TypedArray copy of the canvas's pixel data.
     * @private
     */
    _loop () {
        setTimeout(this._loop.bind(this), Math.max(this.runtime.currentStepTime, Scratch3VideoSensingBlocks.INTERVAL));

        // Add frame to detector
        const time = Date.now();
        if (this._lastUpdate === null) {
            this._lastUpdate = time;
        }
        const offset = time - this._lastUpdate;
        if (offset > Scratch3VideoSensingBlocks.INTERVAL) {
            const frame = this.runtime.ioDevices.video.getFrame({
                format: Video.FORMAT_IMAGE_DATA,
                dimensions: Scratch3VideoSensingBlocks.DIMENSIONS
            });
            if (frame) {
                this._lastUpdate = time;
                this.detect.addFrame(frame.data);
            }
        }
    }

    /**
     * Create data for a menu in scratch-blocks format, consisting of an array
     * of objects with text and value properties. The text is a translated
     * string, and the value is one-indexed.
     * @param {object[]} info - An array of info objects each having a name
     *   property.
     * @return {array} - An array of objects with text and value properties.
     * @private
     */
    _buildMenu (info) {
        return info.map((entry, index) => {
            const obj = {};
            obj.text = entry.name;
            obj.value = entry.value || String(index + 1);
            return obj;
        });
    }

    /**
     * @param {Target} target - collect motion state for this target.
     * @returns {MotionState} the mutable motion state associated with that
     *   target. This will be created if necessary.
     * @private
     */
    _getMotionState (target) {
        let motionState = target.getCustomState(Scratch3VideoSensingBlocks.STATE_KEY);
        if (!motionState) {
            motionState = Clone.simple(Scratch3VideoSensingBlocks.DEFAULT_MOTION_STATE);
            target.setCustomState(Scratch3VideoSensingBlocks.STATE_KEY, motionState);
        }
        return motionState;
    }

    static get SensingAttribute () {
        return SensingAttribute;
    }

    /**
     * An array of choices of whether a reporter should return the frame's
     * motion amount or direction.
     * @type {object[]}
     * @param {string} name - the translatable name to display in sensor
     *   attribute menu
     * @param {string} value - the serializable value of the attribute
     */
    get ATTRIBUTE_INFO () {
        return [
            {
                name: formatMessage({
                    id: 'videoSensing.motion',
                    default: 'motion',
                    description: 'Attribute for the "video [ATTRIBUTE] on [SUBJECT]" block'
                }),
                value: SensingAttribute.MOTION
            },
            {
                name: formatMessage({
                    id: 'videoSensing.direction',
                    default: 'direction',
                    description: 'Attribute for the "video [ATTRIBUTE] on [SUBJECT]" block'
                }),
                value: SensingAttribute.DIRECTION
            }
        ];
    }

    static get SensingSubject () {
        return SensingSubject;
    }

    /**
     * An array of info about the subject choices.
     * @type {object[]}
     * @param {string} name - the translatable name to display in the subject menu
     * @param {string} value - the serializable value of the subject
     */
    get SUBJECT_INFO () {
        return [
            {
                name: formatMessage({
                    id: 'videoSensing.sprite',
                    default: 'sprite',
                    description: 'Subject for the "video [ATTRIBUTE] on [SUBJECT]" block'
                }),
                value: SensingSubject.SPRITE
            },
            {
                name: formatMessage({
                    id: 'videoSensing.stage',
                    default: 'stage',
                    description: 'Subject for the "video [ATTRIBUTE] on [SUBJECT]" block'
                }),
                value: SensingSubject.STAGE
            }
        ];
    }

    /**
     * States the video sensing activity can be set to.
     * @readonly
     * @enum {string}
     */
    static get VideoState () {
        return VideoState;
    }

    /**
     * An array of info on video state options for the "turn video [STATE]" block.
     * @type {object[]}
     * @param {string} name - the translatable name to display in the video state menu
     * @param {string} value - the serializable value stored in the block
     */
    get VIDEO_STATE_INFO () {
        return [
            {
                name: formatMessage({
                    id: 'videoSensing.off',
                    default: 'off',
                    description: 'Option for the "turn video [STATE]" block'
                }),
                value: VideoState.OFF
            },
            {
                name: formatMessage({
                    id: 'videoSensing.on',
                    default: 'on',
                    description: 'Option for the "turn video [STATE]" block'
                }),
                value: VideoState.ON
            },
            {
                name: formatMessage({
                    id: 'videoSensing.onFlipped',
                    default: 'on flipped',
                    description: 'Option for the "turn video [STATE]" block that causes the video to be flipped' +
                        ' horizontally (reversed as in a mirror)'
                }),
                value: VideoState.ON_FLIPPED
            }
        ];
    }

    /**
     * @returns {object} metadata for this extension and its blocks.
     */
    getInfo () {
        // Set the video display properties to defaults the first time
        // getInfo is run. This turns on the video device when it is
        // first added to a project, and is overwritten by a PROJECT_LOADED
        // event listener that later calls updateVideoDisplay
        if (this.firstInstall) {
            this.globalVideoState = VideoState.ON;
            this.globalVideoTransparency = 50;
            this.updateVideoDisplay();
            this.firstInstall = false;
        }

        // Return extension definition
        return {
            id: 'videoSensing',
            name: formatMessage({
                id: 'videoSensing.categoryName',
                default: 'Video Sensing',
                description: 'Label for the video sensing extension category'
            }),
            blockIconURI: blockIconURI,
            menuIconURI: menuIconURI,
            blocks: [
                {
                    // @todo this hat needs to be set itself to restart existing
                    // threads like Scratch 2's behaviour.
                    opcode: 'whenMotionGreaterThan',
                    text: formatMessage({
                        id: 'videoSensing.whenMotionGreaterThan',
                        default: 'when video motion > [REFERENCE]',
                        description: 'Event that triggers when the amount of motion is greater than [REFERENCE]'
                    }),
                    blockType: BlockType.HAT,
                    arguments: {
                        REFERENCE: {
                            type: ArgumentType.NUMBER,
                            defaultValue: 10
                        }
                    }
                },
                {
                    opcode: 'videoOn',
                    blockType: BlockType.REPORTER,
                    text: formatMessage({
                        id: 'videoSensing.videoOn',
                        default: 'video [ATTRIBUTE] on [SUBJECT]',
                        description: 'Reporter that returns the amount of [ATTRIBUTE] for the selected [SUBJECT]'
                    }),
                    arguments: {
                        ATTRIBUTE: {
                            type: ArgumentType.NUMBER,
                            menu: 'ATTRIBUTE',
                            defaultValue: SensingAttribute.MOTION
                        },
                        SUBJECT: {
                            type: ArgumentType.NUMBER,
                            menu: 'SUBJECT',
                            defaultValue: SensingSubject.SPRITE
                        }
                    }
                },
                {
                    opcode: 'videoToggle',
                    text: formatMessage({
                        id: 'videoSensing.videoToggle',
                        default: 'turn video [VIDEO_STATE]',
                        description: 'Controls display of the video preview layer'
                    }),
                    arguments: {
                        VIDEO_STATE: {
                            type: ArgumentType.NUMBER,
                            menu: 'VIDEO_STATE',
                            defaultValue: VideoState.ON
                        }
                    }
                },
                {
                    opcode: 'setVideoTransparency',
                    text: formatMessage({
                        id: 'videoSensing.setVideoTransparency',
                        default: 'set video transparency to [TRANSPARENCY]',
                        description: 'Controls transparency of the video preview layer'
                    }),
                    arguments: {
                        TRANSPARENCY: {
                            type: ArgumentType.NUMBER,
                            defaultValue: 50
                        }
                    }
                }
            ],
            menus: {
                ATTRIBUTE: {
                    acceptReporters: true,
                    items: this._buildMenu(this.ATTRIBUTE_INFO)
                },
                SUBJECT: {
                    acceptReporters: true,
                    items: this._buildMenu(this.SUBJECT_INFO)
                },
                VIDEO_STATE: {
                    acceptReporters: true,
                    items: this._buildMenu(this.VIDEO_STATE_INFO)
                }
            }
        };
    }

    /**
     * Analyze a part of the frame that a target overlaps.
     * @param {Target} target - a target to determine where to analyze
     * @returns {MotionState} the motion state for the given target
     */
    _analyzeLocalMotion (target) {
        const drawable = this.runtime.renderer._allDrawables[target.drawableID];
        const state = this._getMotionState(target);
        this.detect.getLocalMotion(drawable, state);
        return state;
    }

    /**
     * A scratch reporter block handle that analyzes the last two frames and
     * depending on the arguments, returns the motion or direction for the
     * whole stage or just the target sprite.
     * @param {object} args - the block arguments
     * @param {BlockUtility} util - the block utility
     * @returns {number} the motion amount or direction of the stage or sprite
     */
    videoOn (args, util) {
        this.detect.analyzeFrame();

        let state = this.detect;
        if (args.SUBJECT === SensingSubject.SPRITE) {
            state = this._analyzeLocalMotion(util.target);
        }

        if (args.ATTRIBUTE === SensingAttribute.MOTION) {
            return state.motionAmount;
        }
        return state.motionDirection;
    }

    /**
     * A scratch hat block edge handle that analyzes the last two frames where
     * the target sprite overlaps and if it has more motion than the given
     * reference value.
     * @param {object} args - the block arguments
     * @param {BlockUtility} util - the block utility
     * @returns {boolean} true if the sprite overlaps more motion than the
     *   reference
     */
    whenMotionGreaterThan (args, util) {
        this.detect.analyzeFrame();
        const state = this._analyzeLocalMotion(util.target);
        return state.motionAmount > Number(args.REFERENCE);
    }

    /**
     * A scratch command block handle that configures the video state from
     * passed arguments.
     * @param {object} args - the block arguments
     * @param {VideoState} args.VIDEO_STATE - the video state to set the device to
     */
    videoToggle (args) {
        const state = args.VIDEO_STATE;
        this.globalVideoState = state;
        if (state === VideoState.OFF) {
            this.runtime.ioDevices.video.disableVideo();
        } else {
            this.runtime.ioDevices.video.enableVideo();
            // Mirror if state is ON. Do not mirror if state is ON_FLIPPED.
            this.runtime.ioDevices.video.mirror = state === VideoState.ON;
        }
    }

    /**
     * A scratch command block handle that configures the video preview's
     * transparency from passed arguments.
     * @param {object} args - the block arguments
     * @param {number} args.TRANSPARENCY - the transparency to set the video
     *   preview to
     */
    setVideoTransparency (args) {
        const transparency = Cast.toNumber(args.TRANSPARENCY);
        this.globalVideoTransparency = transparency;
        this.runtime.ioDevices.video.setPreviewGhost(transparency);
    }
}

module.exports = Scratch3VideoSensingBlocks;
